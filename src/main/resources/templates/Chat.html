<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
     integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>

    <script src=https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js></script>
    <style>
        body {
    background: linear-gradient(135deg, #e0f7fa, #e1bee7);
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    color: #333;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

.container {
    background: #fff;
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    width: 500px;
    max-width: 95%;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.container:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.25);
}


h1 {
    font-weight: bold;
    font-size: 1.8rem;
    color: #6a1b9a;
    margin-bottom: 20px;
    text-shadow: 1px 1px 4px rgba(0,0,0,0.1);
}

#chat {
    background: #f8f9fa;
    border: 2px solid #6a1b9a;
    border-radius: 15px;
    height: 300px;
    overflow-y: auto;
    padding: 15px;
    transition: border-color 0.3s ease;
}

#chat:hover {
    border-color: #8e24aa;
}


input.form-control {
    border-radius: 12px !important;
    border: 2px solid #ddd;
    transition: all 0.3s ease;
}

input.form-control:focus {
    border-color: #6a1b9a;
    box-shadow: 0 0 8px rgba(106, 27, 154, 0.4);
}

#sendMessage {
    border-radius: 12px;
    background: linear-gradient(135deg, #6a1b9a, #8e24aa);
    border: none;
    transition: all 0.3s ease;
    font-weight: bold;
    padding: 10px 20px;
}

#sendMessage:hover {
    background: linear-gradient(135deg, #8e24aa, #ab47bc);
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(171,71,188,0.4);
}

#sendMessage:active {
    transform: scale(0.95);
}





    </style> 

</head>

<body>
    <div class="container mt-4">
        <h1 class="text-center">Talksy</h1>
        <div id="chat" class="border rounded p-3 mb-3" style="height: 300px; overflow-y: auto;">

        </div>
        <div class="input-group mb-3">
            <input type="text" id="senderInput" class="form-control" placeholder="Type your name here.......">

        </div>
        <div class="input-group mb-3">
            <input type="text" id="messageInput" class="form-control" placeholder="Type your message here...">
            <div id="input-group-append">
                <button id="sendMessage" class="btn btn-primary">Send</button>
            </div>

        </div>
    </div>    
</body>
<script>
    var stompClient = null;
    function setConnected(connected) {
        document.getElementById('sendMessage').disabled = !connected;
    }
    function connect() {
        var socket = new SockJS('/chat');
        stompClient = Stomp.over(socket);
        stompClient.connect({}, function (frame) {
            setConnected(true);
            stompClient.subscribe('/topic/messages', function (message) {
                showMessage(JSON.parse(message.body));

            });
        });
    }
    function showMessage(message) {
        
        var chat = document.getElementById('chat');
        var messageElement = document.createElement('div');
        messageElement.textContent = message.sender + ':'+ message.content;
        messageElement.className = "border-bottom  mb-1";
        chat.appendChild(messageElement);
        chat.scrollTop = chat.scrollHeight;

    }
    function sendMessage() {
        var sender = document.getElementById('senderInput').value;
        var content = document.getElementById('messageInput').value;
        var ChatMessage = {
            sender: sender,
            content: content
        }
        stompClient.send('/app/sendMessage', {}, JSON.stringify(ChatMessage));
        document.getElementById('messageInput').value = '';

       
    }
    document.getElementById('sendMessage').onclick = sendMessage;
    window.onload = connect;
   </script>
</html>